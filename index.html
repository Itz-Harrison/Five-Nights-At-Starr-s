<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.11.0/brython.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.11.0/brython_stdlib.js"></script>
    <style>
        /* This makes the whole background black and the text yellow */
        body { 
            background-color: black; 
            color: #FFD700; 
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            height: 100vh;
            margin: 0;
            padding-top: 20px;
        }
        h1 {
            color: #FFD700; /* Yellow title */
            text-shadow: 2px 2px 5px #555;
        }
        #game-output {
            background-color: #000;
            color: #FFD700; /* Yellow text for the game output too */
            padding: 15px;
            width: 90%;
            max-width: 700px;
            white-space: pre-wrap;
            font-size: 16px;
            border: 1px solid #333;
        }
    </style>
</head>
<body onload="brython()">
    <h1>Five Nights At Starr's</h1>
    
    <div id="game-output"></div>

    <script type="text/python">
        from browser import document, window, timer
        import sys
        import random
        import time

        def write(data):
            document["game-output"].text += str(data)
        sys.stdout.write = write

        # This makes sure the iPhone keyboard pops up
        def web_input(prompt):
            return window.prompt(prompt)

        # --- PLAYER DATA ---
        stats = {
            "tix": 0, "night": 1, "alarm": False, 
            "custom_unlocked": False,
            "sys_shutdown": False, "extra_power": False, 
            "vent_stopper": False, "triple_tix": False
        }

        # Saving to the browser memory instead of a file
        def save_game():
            window.localStorage["starrs_save"] = str(stats)

        def beating_heart():
            print("\n      ðŸ’› ðŸ’› ðŸ’›")
            print("   STARR IS WATCHING...\n")

        def trigger_jumpscare(character, is_pwr_out=False):
            print("\n" + "!" * 45)
            speaker = character if not is_pwr_out else "Starr Baby"
            print(f" JUMPSCARE: {speaker.upper()} ")
            print("!" * 45)
            return "LOSE"

        def play_night(night_num, is_custom=False, diff_level=4):
            print(f"--- STARTING NIGHT {night_num} ---")
            pwr = 150 if stats["extra_power"] else 100
            hr = 12
            corruption, endo = 0, 0
            
            while hr != 6:
                print(f"\n[ {hr} AM ] [ POWER: {int(pwr)}% ]")
                cmd = web_input("1)Cams 2)Listen 3)L-Door 4)R-Door 5)Vent 6)Reset")
                
                if not cmd: break
                
                if cmd == "1": 
                    print(f"Vent: {endo}/5 | Corruption: {corruption}/5")
                elif cmd == "5":
                    if endo >= 3: 
                        print("Cleared the vent!"); endo = 0
                    else: return trigger_jumpscare("Starr Endo")
                
                # Simple logic to win for testing
                pwr -= 5
                if pwr <= 0: return trigger_jumpscare("Starr Baby", True)
                hr = 6
            
            print("\n6:00 AM! THE BELL RINGS.")
            stats["tix"] += 150
            save_game()
            return "WIN"

        def main():
            print("INITIALIZING SYSTEMS...")
            while True:
                print("\n      5 NIGHTS AT STARR'S")
                beating_heart()
                print(f"Tickets: {stats['tix']} | Night: {stats['night']}")
                print("-" * 30)
                print("1) START NIGHT | 5) RESET | 6) EXIT")
                
                choice = web_input("Choice > ")
                if choice == "1":
                    play_night(stats["night"])
                elif choice == "5":
                    stats["tix"] = 0
                    print("Progress Wiped.")
                elif choice == "6":
                    break

        main()
    </script>
</body>
</html>
